# API

## Общие данные
* Каждый запрос должен содержать заголовок `SecKey`, который должен быть равен параметру `secretKey` в файле params.php
* В случае ошибки возвращает следующий ответ, где `httpStatusCode` – int, код состояния http ответа:
    
    ```js
    {"status": httpStatusCode, "message": "Human readable error message"}
    ```

## GET `/v1/sphinxUri/{userId}`
Вовзращает Uri до sphinx search демона для конкретного пользователя. При необходимости, запускает переиндексацию и ожидает окончания ее.

**Принимает:**
* В адресной строке, `userId`, int – id пользователя, данные которого требуется переиндексировать.

**Возвращает в случае успешной работы:**
```js
{"status": 200, "sphinxUri": "192.168.1.1:9036"}
```
# Cron
## Общие данные
Общая точка выполнения всех консольных комманд – `./app/cli {command} {params}`

## `searchdTerminate {timeout}`
Завершает все searchd демоны, которые работают больше `timeout` минут.

**Принимает:**
* `timeout`, int – Количество минут, по истечению которого процесс считается старым и завершается.
